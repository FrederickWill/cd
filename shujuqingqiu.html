<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8">
        <title></title>
    </head>
    <body>
        <button type="button" class="add">添加</button>
        <button type="button" class="delete">删除</button>
        <button type="button" class="edit">修改</button>
        <button type="button" class="serch">查询</button>
    </body>
    <script src="https://cdn.staticfile.org/jquery/2.1.1/jquery.min.js"></script>
    <script>
        //增加
        $(".add").click(function() {
            var newData = {
                "name": "新加数据1",
                "phone": "123456789",
                "email": "11357097537@qq.com",
                "age": "45",
                "id": 6,
                "companyId": 3
            };
            $.ajax({
                type: "post",
                url: "http://localhost:3000/users",
                data: newData,
                success: function(data) {
                    console.log(data)
                    alert("添加成功")
                },
                error: function(data) {
                    console.log(data)
                    alert("已存在，不可重复添加")
                }
            })
 
        })
 
        //删除
        $(".delete").click(function() {
            var delUserId = 5;
            $.ajax({
                type: "DELETE",
                url: "http://localhost:3000/users/" + delUserId,
                dataType: "json",
                success: function(data) {
                    console.log(data)
                    alert("删除成功")
                },
                error: function(err) {
 
                    alert("不可重复删除")
                }
            })
 
        })
 
        //修改
        $(".edit").click(function() {
            var updateuser = {
                "name": "王小婷要修改一下哦",
                "phone": "123456789",
                "email": "11357097537@qq.com",
                "age": "20",
                "id": 1,
                "companyId": 1
            };
            $.ajax({
                type: "PUT",
                url: "http://localhost:3000/users/1",
                data: updateuser,
                success: function(data) {
                    console.log(data)
                    alert("修改成功")
                },
                error: function(err) {
                    alert("修改失败")
                }
            })
 
        })
 
        //查询
        $(".serch").click(function() {
            //查询id=1
            $.ajax({
                type: "get",
                url: "http://localhost:3000/users/1",
                dataType: "json",
                success: function(data) {
                    console.log(data)
                    alert("查询成功")
 
                },
                error: function(data) {
                    console.log(data, '请求失败')
                    alert("查询失败")
                }
            })
        })
    </script>
</html>